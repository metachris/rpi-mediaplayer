{% extends "base.html" %}

{% block header_bottom %}
<style>
    .connectedSortable { list-style-type: none; margin: 0; padding: 0 0 2.5em; float: left; margin-right: 10px; }
    .connectedSortable li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 340px; cursor:pointer; }
</style>
{% endblock %}

{% block body %}
<a href="javascript:playerd_cmd('do_play');" type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-play"></span>
</a>
<a href="javascript:playerd_cmd('do_stop');" type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-stop"></span>
</a>
<a href="javascript:playerd_cmd('do_first');" type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-fast-backward"></span>
</a>
<a href="javascript:playerd_cmd('do_prev');" type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-backward"></span>
</a>
<a href="javascript:playerd_cmd('do_next');" type="button" class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-forward"></span>
</a>

<hr />

<div class="row">
    <div class="col-md-6">
        <form action="/playlist_save/" method="post">
        {% csrf_token %}

        <h2>Playlist </h2>
        <hr />
        <ul id="sortable1" class="connectedSortable" style="border:1px solid #d3d3d3; width:100%;">
            {% for pf in playlist_files %}
                <li class="ui-state-default"><span class="glyphicon glyphicon-{% if pf.media == 'video' %}film{% elif pf.media == 'audio' %}headphones{% elif pf.media == 'image' %}picture{% endif %}"></span> {{ pf.fn }} {% if not pf.existing %} <span class="label label-danger" style="font-size:60%;">File Missing</span>{% endif %}<input type="hidden" name="fn[]" value="{{ pf.fn }}" /></li>
            {% endfor %}
        </ul>

        <div style="clear:both;"></div>

        <!--<h4>Mode</h4>-->
        <!--<div class="radio">-->
            <!--<label><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>Normal</label>-->
        <!--</div>-->
        <!--<div class="radio">-->
            <!--<label><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>Random</label>-->
        <!--</div>-->

        <!--<br />-->
        <!--<h4>Loop</h4>-->
        <!--<input type="number" class="form-control" min="0" placeholder="0" style="width:50px" /> <small>0 for endless</small>-->

            <input type="submit" value="Save" class="btn btn-success" disabled="disabled" id="btn-submit"/>

        </form>
    </div>

    <div class="col-md-6">
        <h2>Media</h2>
        <hr />
        <ul id="sortable2" class="connectedSortable">
            {% for fn in media_files.video %}
                <li class="ui-state-default"><span class="glyphicon glyphicon-film"></span> {{ fn }}<input type="hidden" name="fn[]" value="{{ fn }}" /></li>
            {% endfor %}
            {% for fn in media_files.audio %}
                <li class="ui-state-default"><span class="glyphicon glyphicon-headphones"></span> {{ fn }}<input type="hidden" name="fn[]" value="{{ fn }}" /></li>
            {% endfor %}
            {% for fn in media_files.image %}
                <li class="ui-state-default"><span class="glyphicon glyphicon-picture"></span> {{ fn }}<input type="hidden" name="fn[]" value="{{ fn }}" /></li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}


{% block js_bottom %}
<script>
$(function() {
    $( ".connectedSortable" ).sortable({
        connectWith: ".connectedSortable",
        change: function(event, ui) { $("#btn-submit").prop("disabled", false); },
    }).disableSelection();
});

function playerd_cmd(cmd) {
    $.ajax({
        url: "/ajax/player_cmd?cmd=" + cmd
    }).done(function(data) {console.log(data);})
}
</script>
{% endblock %}
